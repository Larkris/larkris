# hostname
hostname = *.baidu.com, *.googlevideo.com, *.uve.weibo.com, *.wikipedia.org, *.wikiwand.com, acs.m.taobao.com, act.vip.iqiyi.com, api-mifit*.huami.com, api.jr.mi.com, api.m.jd.com, api.pinduoduo.com, api.smzdm.com, api.weibo.cn, api.yangkeduo.com, api.zhihu.com, app-api.smzdm.com, app.bilibili.com, article-api.smzdm.com, bwtapi.czsmk.com, flowplus.meituan.net, gw.alicdn.com, haojia-api.smzdm.com, heic.alicdn.com, homepage-api.smzdm.com, img*.360buyimg.com, img.meituan.net, interface*.music.163.com, issuecdn.baidupcs.com, m*.amap.com, m.client.10010.com, manga.bilibili.com, mapi.weibo.com, mp.weixin.qq.com, ms.jr.jd.com, newclient.map.baidu.com, p*.meituan.net, pan.baidu.com, s-api.smzdm.com, s.youtube.com, s3plus.meituan.net, static.xiaobu.hk, testflight.apple.com, weather-data.apple.com, www.google.cn, www.youtube.com, www.zhihu.com, zhuanlan.zhihu.com
# script
# bilibili
^https?://app\.bilibili\.com/x/v\d/splash/list url script-response-body https://raw.githubusercontent.com/srk24/profile/master/js/bilibili_splash.js

# smzdm
^https?://app-api\.smzdm\.com/util/update url script-response-body https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/script/smzdm/smzdm_remove_ads.js
^https?://article-api\.smzdm\.com/article/index_home_page url script-response-body https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/script/smzdm/smzdm_remove_ads.js
^https?://haojia-api\.smzdm\.com/home/list url script-response-body https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/script/smzdm/smzdm_remove_ads.js
^https?://homepage-api\.smzdm\.com/home url script-response-body https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/script/smzdm/smzdm_remove_ads.js
^https?://s-api\.smzdm\.com/sou/list url script-response-body https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/script/smzdm/smzdm_remove_ads.js

# testflight
^https?://testflight\.apple\.com/v\d/accounts/.+?/install$ url script-request-body https://raw.githubusercontent.com/Larkris/larkris/main/script/testflight.js

# weather_aqi
^https?://weather-data\.apple\.com/v1/weather/[\w-_]+/[0-9]+\.[0-9]+/[0-9]+\.[0-9]+\? url script-response-body https://raw.githubusercontent.com/Larkris/larkris/main/script/weather_aqi.js

# wechat
^https?://mp\.weixin\.qq\.com/mp/getappmsgad url response-body "advertisement_num":\d,"advertisement_info":\[.+\], response-body "advertisement_num":0,"advertisement_info":[],

# weibo
^https?://(sdk|wb)app\.uve\.weibo\.com(/interface/sdk/sdkad.php|/wbapplua/wbpullad.lua) url script-response-body https://raw.githubusercontent.com/yichahucha/surge/master/wb_launch.js
^https?://m?api\.weibo\.c(n|om)/2/(statuses/(unread|extend|positives/get|(friends|video)(/|_)(mix)?timeline)|stories/(video_stream|home_list)|(groups|fangle)/timeline|profile/statuses|comments/build_comments|photo/recommend_list|service/picfeed|searchall|cardlist|page|!/(photos/pic_recommend_status|live/media_homelist)|video/tiny_stream_video_list|photo/info|remind/unread_count) url script-response-body https://raw.githubusercontent.com/yichahucha/surge/master/wb_ad.js

# zhihu
^https?://api\.zhihu\.com/(comment_v5/)?(answers|comments?|articles|pins)/\d+/(root_|child_)?comments? url script-response-body https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/script/zhihu/zhihu_plus.js
^https?://api\.zhihu\.com/(moments|topstory)(/|\?)?(recommend|action=|feed_type=)(?!/people) url script-response-body https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/script/zhihu/zhihu_plus.js
^https?://api\.zhihu\.com/people/ url script-response-body https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/script/zhihu/zhihu_plus.js
^https?://api\.zhihu\.com/search/preset_words\? url script-response-body https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/script/zhihu/zhihu_plus.js
^https?://api\.zhihu\.com/search/top_search/tabs/hot/items url script-response-body https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/script/zhihu/zhihu_plus.js
^https?://api\.zhihu\.com/topstory/hot-lists?(\?|/) url script-response-body https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/script/zhihu/zhihu_plus.js
^https?://api\.zhihu\.com/v4/questions url script-response-body https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/script/zhihu/zhihu_plus.js

# zZPiglet 百度知乎修改
# 百度（全站替换为手机百度 Quark 的 User-Agent）
^https?://(?!d\.pcs).*(?<!map)\.baidu\.com url request-header (\r\n)User-Agent:.+iPhone.+(\r\n) request-header $1User-Agent: Mozilla/5.0 (iPhone; CPU iPhone OS 13_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.1.1 Mobile/15E148 Safari/16C50 Quark/604.1 T7/10.3 SearchCraft/2.6.3 (Baidu; P1 8.0.0)$2

# 知乎（部分替换为手机百度 Quark 的 User-Agent）
^https?://www\.zhihu\.com url request-header (\r\n)User-Agent:.+(\r\n) request-header $1User-Agent: Mozilla/5.0 (iPhone; CPU iPhone OS 13_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.1.1 Mobile/15E148 Safari/16C50 Quark/604.1 T7/10.3 SearchCraft/2.6.3 (Baidu; P1 8.0.0)$2

# 知乎直接看
^https://www\.zhihu\.com/question/ url script-response-body https://raw.githubusercontent.com/id77/QuantumultX/master/Script/zhihu.js
^https://zhuanlan\.zhihu\.com/p/ url script-response-body https://raw.githubusercontent.com/id77/QuantumultX/master/Script/zhihu.js

# rewrite
# google
^https?://(ditu|maps).google\.cn url 302 https://maps.google.com
^https?://(www.)?(g|google)\.cn url 302 https://www.google.com

# http to https
^https?://(www.)?jd\.com/ url 302 https://www.jd.com/
^https?://(www.)?mi\.com/ url 302 https://www.mi.com/
^https?://(www.)?taobao\.com/ url 302 https://taobao.com/

# miwifi
^https?://miwifi\.com/main\.html url 302 http://miwifi.com/cgi-bin/luci/web?goto=pc

# wiki
^https?://zh.(m.)?wikipedia.org/zh(-\w*)?(?=/) url 302 https://www.wikiwand.com/zh$2
^https?://(\w*).(m.)?wikipedia.org/wiki url 302 https://www.wikiwand.com/$1

# youtube
(^https?://(?!redirector)[\w-]+\.googlevideo\.com/((?!dclk_video_ads).)+)(ctier=L)(&.+) url 302 $1$3

# reject
# baidu
^https?://((25[0-5]|2[0-4]\d|1\d{2}|[1-9]?\d)\.){3}(25[0-5]|2[0-4]\d|1\d{2}|[1-9]?\d)/\w+/\w+/(sync|newRnSync|mlog) url reject
^https?://((25[0-5]|2[0-4]\d|1\d{2}|[1-9]?\d)\.){3}(25[0-5]|2[0-4]\d|1\d{2}|[1-9]?\d)/c/s/splashSchedule url reject
^https?://c\.tieba\.baidu\.com/\w+/\w+/(sync|newRnSync|mlog) url reject
^https?://c\.tieba\.baidu\.com/c/f/forum/getAdInfo url reject
^https?://c\.tieba\.baidu\.com/c/s/splashSchedule url reject
^https?://issuecdn\.baidupcs\.com/issue/netdisk/guanggao url reject
^https?://newclient\.map\.baidu\.com/client/phpui2/\?qt=ads url reject
^https?://pan\.baidu\.com/act/api/activityentry url reject
^https?://pan\.baidu\.com/rest/\d\.\d/pcs/adx url reject

# bilibili
^https?://manga\.bilibili\.com/twirp/comic\.v\d\.Comic/Flash url reject

# changzhouxing
^https?://bwtapi\.czsmk\.com/city-api/ad/list\? url reject
^https?://static\.xiaobu\.hk/changzx/ad/ url reject

# chinaunicom
^https?://m\.client\.10010\.com/mobileService/customer/accountListData\.htm url reject
^https?://m\.client\.10010\.com/uniAdmsInterface/getWelcomeAd url reject

# eleme
^https?://cube\.elemecdn\.com/[\w/]+\.jpeg\?x-oss-process=image/resize,m_fill,w_1\d{3},h_2\d{3}/format,webp/ url reject
^https?://cube\.elemecdn\.com/[\w/]+\.jpeg\?x-oss-process=image/resize,m_fill,w_6\d{2},h_8\d{2}/format,webp/ url reject
^https?://cube\.elemecdn\.com/[\w/]+\.jpeg\?x-oss-process=image/resize,m_fill,w_\d{3},h_\d{4}/format,webp/ url reject
^https?://cube\.elemecdn\.com/\w/\w{2}/\w+mp4\.mp4\? url reject

# iqiyi
^https?://act\.vip\.iqiyi\.com/interact/api/show\.do url reject
^https?://act\.vip\.iqiyi\.com/interact/api/v\d/show url reject
^https?://iface\.iqiyi\.com/api/getNewAdInfo url reject

# jd
^https?://(bdsp-x|dsp-x)\.jd\.com/adx/ url reject
^https?://api\.m\.jd.com/client\.action\?functionId=queryMaterialAdverts url reject
^https?://api\.m\.jd.com/client\.action\?functionId=start url reject-img
^https?://img\d+\.360buyimg\.com/jddjadvertise/ url reject
^https?://ms\.jr\.jd\.com/gw/generic/aladdin/na/m/getLoadingPicture url reject

# mi
^https?://(api-mifit|api-mifit-\w+)\.huami\.com/discovery/mi/discovery/\w+_ad\? url reject
^https?://api\.jr\.mi\.com/jr/api/playScreen url reject
^https?://api\.jr\.mi\.com/v\d/adv/ url reject
^https?://api\.m\.mi\.com/v\d/app/start url reject

# miaopai
^https?://b-api\.ins\.miaopai\.com/\d/ad/ url reject

# mituan
^https?://(s3plus|flowplus)\.meituan\.net/v\d/\w+/linglong/\w+\.(gif|jpg|mp4) url reject
^https?://img\.meituan\.net/(adunion|display|dpmobile|midas)/\w+\.(gif|jpg|jpg\.webp)$ url reject
^https?://p\d\.meituan\.net/(bizad|wmbanner)/\w+\.jpg url reject
^https?://p\d\.meituan\.net/movie/\w+\.jpg\?may_covertWebp url reject

# netease_cloudmusic
^https?://((25[0-5]|2[0-4]\d|1\d{2}|[1-9]?\d)\.){3}(25[0-5]|2[0-4]\d|1\d{2}|[1-9]?\d)/eapi/ad/ url reject
^https?://interface(\d)?.music.163.com/eapi/ad/ url reject

# pinduoduo
^https?://api\.(pinduoduo|yangkeduo)\.com/api/cappuccino/splash url reject

# smzdm
^https?://api\.smzdm\.com/v\d/util/loading url reject
^https?://app-api\.smzdm\.com/util/loading url reject
^https?://s\d\.zdmimg\.com/www/api/v\d/api/thirdAd\.php url reject

# taobao
^https?://(gw|heic)\.alicdn\.com/\w{2}s/.+\.jpg_(9\d{2}|\d{4}) url reject
^https?://(gw|heic)\.alicdn\.com/imgextra/.+\d{4}-\d{4}\.jpg_(9\d{2}|\d{4}) url reject
^https?://acs\.m\.taobao\.com/gw/mtop\.film\.mtopadvertiseapi\.queryadvertise/ url reject
^https?://m\d\.amap\.com/ws/valueadded/alimama/splash_screen/ url reject

# tencent_music
^https?://((25[0-5]|2[0-4]\d|1\d{2}|[1-9]?\d)\.){3}(25[0-5]|2[0-4]\d|1\d{2}|[1-9]?\d)/music/common/upload/t_splash_info/ url reject
^https?://y\.gtimg\.cn/music/common/upload/t_splash_info/ url reject

# tencent_video
^https?://((25[0-5]|2[0-4]\d|1\d{2}|[1-9]?\d)\.){3}(25[0-5]|2[0-4]\d|1\d{2}|[1-9]?\d)/[a-z.]+\.tc\.qq\.com/[\w\W]+=v3004 url reject
^https?://((25[0-5]|2[0-4]\d|1\d{2}|[1-9]?\d)\.){3}(25[0-5]|2[0-4]\d|1\d{2}|[1-9]?\d)/[a-z.]+\.tc\.qq\.com/[\w\W]+_p20\d_ url reject
^https?://((25[0-5]|2[0-4]\d|1\d{2}|[1-9]?\d)\.){3}(25[0-5]|2[0-4]\d|1\d{2}|[1-9]?\d)/[a-z.]+\.tc\.qq\.com/[\w\W]+p20\d\.1\.mp4\? url reject
^https?://video\.dispatch\.tc\.qq\.com/\w+\.p20\d\.1\.mp4 url reject
^https?://vv\.video\.qq\.com/getvmind\? url reject

# youku
^https?://[\w-.]+\.ott\.cibntv\.net/[\w/-]+.mp4\?sid= url reject
^https?://[\w-.]+\.ott\.cibntv\.net/[\w/-]+.mp4\?ccode=02010101 url reject

# youtube
^https?://(www|s)\.youtube\.com/(pagead|ptracking) url reject
^https?://(www|s)\.youtube\.com/api/stats/ads url reject
^https?://[\w-]+\.googlevideo\.com/((?!(dclk_video_ads|videoplayback)).)+&(oad|ctier) url reject
^https?://\s.youtube.com/api/stats/qoe?.*adformat= url reject

# zhihu
^https?://api\.zhihu\.com/\w+/\d+/comments/featured-comment-ad url reject
^https?://api\.zhihu\.com/ad url reject
^https?://api\.zhihu\.com/appview/api/v\d/answers/\d+/recommendations url reject
^https?://api\.zhihu\.com/commercial_api/ url reject
^https?://api\.zhihu\.com/fringe/ad url reject
^https?://www\.zhihu\.com/api/v\d/answers/\d+/recommendations url reject